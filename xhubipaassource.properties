#Embedded server port

server.port=7090


#Data Source configuration 

#spring.datasource.url=jdbc:sqlserver://192.168.99.100:1433;databaseName=spring_cloud_repo;instance=SYSADMIN-PC
#spring.datasource.username=pos
#spring.datasource.password=pos
#spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

spring.datasource.url=jdbc:sqlserver://192.168.2.191:1433;databaseName=xhubcloud;instance=MSSQLSERVER
spring.datasource.username=xhubcloud
spring.datasource.password=xhubcloud
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

#Kafka-Zookeper Properties
spring.cloud.stream.kafka.binder.brokers=192.168.99.100:9092
spring.cloud.stream.kafka.binder.zkNodes=192.168.99.100:2181

#JDBC Source properties

jdbc.update=UPDATE XHUB_STG_INV_VALID_DESTINATION SET STG_PROCESS_DATE=CURRENT_TIMESTAMP WHERE STG_EVENT_ID IN (:stgEventId)
jdbc.query=SELECT STG_INV_VALID_DESTINATION.ACTION_CODE,STG_INV_VALID_DESTINATION.RECORD_TYPE,STG_INV_VALID_DESTINATION.DOC_TYPE_CODE,STG_INV_VALID_DESTINATION.DOC_SUBTYPE_CODE,STG_INV_VALID_DESTINATION.SOURCE_LOCATION_ID,STG_INV_VALID_DESTINATION.DESTINATION_TYPE,STG_INV_VALID_DESTINATION.DESTINATION_LOCATION_ID,STG_INV_VALID_DESTINATION.DESCRIPTION,STG_INV_VALID_DESTINATION.SORT_ORDER,STG_INV_VALID_DESTINATION.STG_EVENT_ID,STG_INV_VALID_DESTINATION.STG_FILE_IN from (SELECT ACTION_CODE,RECORD_TYPE,DOC_TYPE_CODE,DOC_SUBTYPE_CODE,SOURCE_LOCATION_ID,DESTINATION_TYPE,DESTINATION_LOCATION_ID,DESCRIPTION,SORT_ORDER,STG_EVENT_ID,STG_PROCESS_DATE, STG_STATUS,STG_RUN_ID,STG_FILE_IN FROM XHUB_STG_INV_VALID_DESTINATION VALID_DESTINATION WITH (NOLOCK) WHERE  SOURCE_LOCATION_ID in (select TOP 1 SOURCE_LOCATION_ID SOURCE_LOCATION_ID from (SELECT SOURCE_LOCATION_ID,STG_PROCESS_DATE,STG_STATUS FROM XHUB_STG_INV_VALID_DESTINATION WITH (NOLOCK) WHERE SOURCE_LOCATION_ID=SOURCE_LOCATION_ID GROUP BY SOURCE_LOCATION_ID,STG_PROCESS_DATE,STG_STATUS) STG_INV_VALID_DESTINATION WHERE STG_PROCESS_DATE IS NULL AND STG_STATUS = '0') ) STG_INV_VALID_DESTINATION WHERE STG_PROCESS_DATE IS NULL AND STG_STATUS ='0' order by STG_EVENT_ID
#jdbc.split=true
jdbc.max-rows-per-poll=5000
updatePerRow=true
#logging.level.org.springframework.cloud.stream=DEBUG


#error Channel properties

spring.cloud.stream.bindings.error.destination=errorChannel


#Xhub Core references

xhubDatabean=com.skillnet.retail.xhub.databean.InvValidDestinationDatabean
xhubDao=com.skillnet.retail.xhub.dao.mssql.InvValidDestinationMssqlImpDao

#Other properties 
columnLabel=SOURCE_LOCATION_ID
job.name=InvValidDestinationStgDBToFlatFileJob





